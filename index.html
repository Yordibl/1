<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urenregistratie</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <script>
        function toonSectie(sectie) {
            document.getElementById("menu").style.display = "none";
            document.getElementById("nieuweWerkbon").style.display = "none";
            document.getElementById("openWerkbon").style.display = "none";
            document.getElementById(sectie).style.display = "block";
        }
    </script>
</head>
<body>
    <div id="menu">
        <h1>Urenregistratie</h1>
        <button onclick="toonSectie('nieuweWerkbon')">Nieuwe werkbon aanmaken</button>
        <button onclick="toonSectie('openWerkbon')">Open werkbon</button>
    </div>
    
    <div id="nieuweWerkbon" style="display:none;">
        <h2>Nieuwe urenbon</h2>
        <form id="urenbonForm">
            <label>Naam urenbon: <input type="text" id="urenbonNaam" required></label>
            <button type="submit">Aanmaken</button>
        </form>
    </div>
    
    <div id="openWerkbon" style="display:none;">
        <h2>Bestaande urenbonnen</h2>
        <select id="urenbonSelect"></select>
        <button onclick="wisselUrenbon()">Laden</button>
        
        <h2>Uren invoeren</h2>
        <form id="urenForm">
            <label>Datum: <input type="date" id="datum" required></label><br>
            <label>Starttijd: <input type="time" id="starttijd" required></label><br>
            <label>Eindtijd: <input type="time" id="eindtijd" required></label><br>
            <label>Beschrijving: <input type="text" id="beschrijving"></label><br>
            <button type="submit">Toevoegen</button>
        </form>
        
        <h2>Stopwatch</h2>
        <button onclick="startStopwatch()">Start</button>
        <button onclick="stopStopwatch()">Stop</button>
        <button onclick="resetStopwatch()">Reset</button>
        <p>Gewerkte tijd: <span id="stopwatchDisplay">00:00:00</span></p>
        
        <h2>Gewerkte uren</h2>
        <ul id="urenLijst"></ul>
        <p><strong>Totaal gewerkte uren:</strong> <span id="totaalUren">0</span> uur</p>
    </div>
    
    <script>
        let huidigeUrenbon = localStorage.getItem("huidigeUrenbon") || "Standaard";
        let stopwatchInterval;
        let stopwatchStart;
        laadUrenbonnen();
        toonUren();
        
        document.getElementById("urenbonForm").addEventListener("submit", function(event) {
            event.preventDefault();
            let naam = document.getElementById("urenbonNaam").value;
            let urenbonnen = JSON.parse(localStorage.getItem("urenbonnen")) || [];
            if (!urenbonnen.includes(naam)) {
                urenbonnen.push(naam);
                localStorage.setItem("urenbonnen", JSON.stringify(urenbonnen));
            }
            localStorage.setItem("huidigeUrenbon", naam);
            laadUrenbonnen();
            toonUren();
        });
        
        function laadUrenbonnen() {
            let urenbonnen = JSON.parse(localStorage.getItem("urenbonnen")) || ["Standaard"];
            let select = document.getElementById("urenbonSelect");
            select.innerHTML = "";
            urenbonnen.forEach(naam => {
                let option = document.createElement("option");
                option.value = naam;
                option.textContent = naam;
                if (naam === huidigeUrenbon) option.selected = true;
                select.appendChild(option);
            });
        }
    </script>
</body>
</html>
