<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urenregistratie</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <script>
        function toonSectie(sectie) {
            document.getElementById("menu").style.display = "none";
            document.getElementById("nieuweWerkbon").style.display = "none";
            document.getElementById("openWerkbon").style.display = "none";
            document.getElementById(sectie).style.display = "block";
        }

        function zetDatumVandaag() {
            let vandaag = new Date().toISOString().split('T')[0];
            document.getElementById("datum").value = vandaag;
        }
    </script>
</head>
<body onload="zetDatumVandaag()">
    <div id="menu">
        <h1>Urenregistratie</h1>
        <button onclick="toonSectie('nieuweWerkbon')">Nieuwe werkbon aanmaken</button>
        <button onclick="toonSectie('openWerkbon')">Open werkbon</button>
    </div>
    
    <div id="nieuweWerkbon" style="display:none;">
        <h2>Nieuwe urenbon</h2>
        <form id="urenbonForm">
            <label>Naam urenbon: <input type="text" id="urenbonNaam" required></label>
            <button type="submit">Aanmaken</button>
        </form>
    </div>
    
    <div id="openWerkbon" style="display:none;">
        <h2>Bestaande urenbonnen</h2>
        <select id="urenbonSelect"></select>
        <button onclick="wisselUrenbon()">Laden</button>
        
        <h2>Uren invoeren</h2>
        <form id="urenForm">
            <label>Datum: <input type="date" id="datum"></label><br>
            <label>Beschrijving: <input type="text" id="beschrijving"></label><br>
            <button type="button" onclick="startStopwatch()">Start</button>
            <button type="button" onclick="stopStopwatch()">Stop</button>
            <button type="button" onclick="resetStopwatch()">Reset</button>
            <p>Gewerkte tijd: <span id="stopwatchDisplay">00:00:00</span></p>
            <button type="button" onclick="adjustTime(5)">+5 min</button>
            <button type="button" onclick="adjustTime(10)">+10 min</button>
            <button type="button" onclick="adjustTime(30)">+30 min</button>
            <button type="button" onclick="adjustTime(60)">+60 min</button>
            <button type="button" onclick="adjustTime(-5)">-5 min</button>
            <button type="button" onclick="adjustTime(-10)">-10 min</button>
            <button type="button" onclick="adjustTime(-30)">-30 min</button>
            <button type="button" onclick="adjustTime(-60)">-60 min</button>
        </form>
    </div>
    
    <script>
        let stopwatchStart, stopwatchInterval, elapsedSeconds = 0;
        
        function startStopwatch() {
            stopwatchStart = Date.now() - (elapsedSeconds * 1000);
            stopwatchInterval = setInterval(updateStopwatch, 1000);
        }

        function stopStopwatch() {
            clearInterval(stopwatchInterval);
            roundTime();
        }

        function resetStopwatch() {
            clearInterval(stopwatchInterval);
            elapsedSeconds = 0;
            document.getElementById("stopwatchDisplay").textContent = "00:00:00";
        }

        function updateStopwatch() {
            elapsedSeconds = Math.floor((Date.now() - stopwatchStart) / 1000);
            let hours = Math.floor(elapsedSeconds / 3600);
            let minutes = Math.floor((elapsedSeconds % 3600) / 60);
            let seconds = elapsedSeconds % 60;
            document.getElementById("stopwatchDisplay").textContent = 
                `${String(hours).padStart(2,'0')}:${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;
        }

        function roundTime() {
            let minutes = Math.round(elapsedSeconds / 60);
            let remainder = minutes % 5;
            if (remainder < 3) {
                minutes -= remainder;
            } else {
                minutes += (5 - remainder);
            }
            elapsedSeconds = minutes * 60;
            updateStopwatch();
        }

        function adjustTime(amount) {
            elapsedSeconds = Math.max(0, elapsedSeconds + amount * 60);
            updateStopwatch();
        }
    </script>
</body>
</html>
